/*! For license information please see app.js.LICENSE.txt */
(()=>{var t={556:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){var t,e,n="lscache-",r="-cacheexpiration",i=6e4,o=g(i),a="",c=!1;function u(){var e="__lscachetest__";if(void 0!==t)return t;try{if(!localStorage)return!1}catch(t){return!1}try{y(e,"__lscachetest__"),d(e),t=!0}catch(e){t=!(!s(e)||!localStorage.length)}return t}function s(t){return t&&("QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name)}function l(){return void 0===e&&(e=null!=window.JSON),e}function f(t){return t+r}function h(){return Math.floor((new Date).getTime()/i)}function p(t){return localStorage.getItem(n+a+t)}function y(t,e){localStorage.removeItem(n+a+t),localStorage.setItem(n+a+t,e)}function d(t){localStorage.removeItem(n+a+t)}function m(t){for(var e=new RegExp("^lscache-"+(a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)")),n=localStorage.length-1;n>=0;--n){var i=localStorage.key(n);(i=(i=i&&i.match(e))&&i[1])&&i.indexOf(r)<0&&t(i,f(i))}}function v(t){var e=f(t);d(t),d(e)}function b(t){var e=f(t),n=p(e);if(n){var r=parseInt(n,10);if(h()>=r)return d(t),d(e),!0}}function w(t,e){c&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+t),e&&window.console.warn("lscache - The error was: "+e.message))}function g(t){return Math.floor(864e13/t)}return{set:function(t,e,n){if(!u())return!1;if(!l())return!1;try{e=JSON.stringify(e)}catch(t){return!1}try{y(t,e)}catch(n){if(!s(n))return w("Could not add item with key '"+t+"'",n),!1;var r,i=[];m((function(t,e){var n=p(e);n=n?parseInt(n,10):o,i.push({key:t,size:(p(t)||"").length,expiration:n})})),i.sort((function(t,e){return e.expiration-t.expiration}));for(var a=(e||"").length;i.length&&a>0;)r=i.pop(),w("Cache is full, removing item with key '"+t+"'"),v(r.key),a-=r.size;try{y(t,e)}catch(e){return w("Could not add item with key '"+t+"', perhaps it's too big?",e),!1}}return n?y(f(t),(h()+n).toString(10)):d(f(t)),!0},get:function(t){if(!u())return null;if(b(t))return null;var e=p(t);if(!e||!l())return e;try{return JSON.parse(e)}catch(t){return e}},remove:function(t){u()&&v(t)},supported:function(){return u()},flush:function(){u()&&m((function(t){v(t)}))},flushExpired:function(){u()&&m((function(t){b(t)}))},setBucket:function(t){a=t},resetBucket:function(){a=""},getExpiryMilliseconds:function(){return i},setExpiryMilliseconds:function(t){o=g(i=t)},enableWarnings:function(t){c=t}}})?n.apply(e,[]):n)||(t.exports=r)}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";function t(t,e){return t.sort((function(t,n){var r=[t[e],n[e]].map((function(t){return"string"==typeof t?parseInt(t,10):"number"==typeof t?t:NaN})),i=r[0],o=r[1];return Number.isNaN(i)||Number.isNaN(o)?0:i<o?1:i>o?-1:0}))}function e(t){return Array(t).fill(0).map((function(t,e){return e}))}var r=n(556),i=function(){function t(){if("undefined"==typeof fetch)throw new Error("This browser does not have Fetch API.")}return t.prototype.fetch=function(t){return e=this,n=void 0,i=function(){var e,n,r,i;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(o){switch(o.label){case 0:return e=new URL(t.url),Object.keys(t.params).forEach((function(n){var r=t.params[n];"string"==typeof r&&e.searchParams.append(n,r),"number"==typeof r&&e.searchParams.append(n,""+r)})),null!=(n=this.getCache(e.toString()))?[2,Promise.resolve(n)]:[4,fetch(e.toString())];case 1:return 200!==(r=o.sent()).status?[2,Promise.reject(new Error(""+r.status))]:[4,r.json()];case 2:return i=o.sent(),this.saveCache(e.toString(),i,t.cacheAgeMin),[2,i]}}))},new((r=void 0)||(r=Promise))((function(t,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function c(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,c)}u((i=i.apply(e,n||[])).next())}));var e,n,r,i},t.prototype.getCache=function(t){return r.get(t)},t.prototype.saveCache=function(t,e,n){r.set(t,e,n)},t}(),o=function(){function t(e){var n=t.validateConf(Object.assign({},t.defaultConf,e));this.requestConf={maxRequest:n.maxRequest,cacheAgeMin:n.cacheAgeMin,url:"https://qiita.com/api/v2/users/"+n.userId+"/items",params:{per_page:n.perPage,page:0}},this.api=new i}return t.validateConf=function(t){return t.perPage<=0&&(t.perPage=1),t.perPage>100&&(t.perPage=100),t.maxRequest<0&&(t.maxRequest=0),t},t.prototype.fetch=function(){return t=this,e=void 0,r=function(){var t,e,n,r;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(i){switch(i.label){case 0:t=0,e=[],i.label=1;case 1:return t<this.requestConf.maxRequest?(t++,this.createNextRequest(),[4,this.fetchItems()]):[3,3];case 2:return n=i.sent(),r=this.isThereNextPage(n),e=e.concat(n),r?[3,1]:[3,3];case 3:return[2,e]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.fetchItems=function(){return this.api.fetch(this.requestConf)},t.prototype.createNextRequest=function(){this.requestConf.params.page+=1},t.prototype.isThereNextPage=function(t){return 0!==t.length&&!(t.length<this.requestConf.params.per_page)},t.defaultConf={userId:"qiita",maxRequest:5,perPage:100,cacheAgeMin:15},t}(),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=function(){function n(t){this.conf=n.validateConf(Object.assign({},n.defaultConf,t)),this.api=new o(this.conf),this.articles=[]}return n.validateConf=function(t){return t.maxToShow<0&&(t.maxToShow=0),t.filterByLikesFrom<0&&(t.filterByLikesFrom=0),t},n.prototype.fetch=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(e){switch(e.label){case 0:return t=this,[4,this.api.fetch()];case 1:return t.articles=e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},n.prototype.createOrder=function(t){return(this.conf.useShuffle?function(t){for(var e=t.concat(),n=e.length;n;){var r=Math.floor(Math.random()*n--),i=e[n];e[n]=e[r],e[r]=i}return e}(e(t.length)):e(t.length)).slice(0,this.conf.maxToShow)},n.prototype.filterOrigin=function(){var t=this;return 0===this.conf.filterByLikesFrom?this.articles:this.articles.filter((function(e){return e.likes_count>=t.conf.filterByLikesFrom}))},n.prototype.getArticlesToShow=function(){var e=this.filterOrigin(),n=this.conf.sortByLike&&!this.conf.useShuffle?t(e,"likes_count"):e,r=this.createOrder(e).map((function(t){return n[t]}));return this.conf.sortByLike&&this.conf.useShuffle?t(r,"likes_count"):r},n.prototype.getUserToShow=function(){var t=this.articles[0].user;return a(a({},t),{likes_count:this.countAllLikes(),url:"https://qiita.com/"+t.id})},n.prototype.countAllLikes=function(){return this.articles.reduce((function(t,e){return t+e.likes_count}),0)},n.defaultConf={maxToShow:5,useShuffle:!1,sortByLike:!0,filterByLikesFrom:0},n}(),u=function(){function t(e,n,r){this.dest=e,this.items=n,this.conf=Object.assign({},t.defaultConf,r);var i=document.querySelector(this.conf.userTemplate),o=document.querySelector(this.conf.articleTemplate);this.userTemplate=i instanceof HTMLTemplateElement?i:null,this.articleTemplate=o instanceof HTMLTemplateElement?o:null;var a=null===e?document.querySelector(this.conf.userDest):e.querySelector(this.conf.userDest),c=null===e?document.querySelector(this.conf.articleDest):e.querySelector(this.conf.articleDest);this.userDest=a instanceof HTMLElement?a:null,this.articleDest=c instanceof HTMLElement?c:null}return t.prototype.render=function(){this.claimNoTransition(),this.renderUser(),this.renderArticles(),this.setSubject(),this.claimLoaded()},t.prototype.setSubject=function(){var t=this;if(null!==this.dest){var e=this.dest.querySelectorAll(".js-subject");Array.from(e,(function(e){e.innerText=t.conf.subject}))}},t.prototype.renderUser=function(){var t=this;null!==this.userTemplate&&null!==this.userDest&&this.renderView(this.userTemplate,this.userDest,(function(e){var n=document.importNode(e.content,!0);return Object.entries(t.items.getUserToShow()).forEach((function(e){t.fillTemplate(n,e)})),n}))},t.prototype.renderArticles=function(){var t=this;null!==this.articleTemplate&&null!==this.articleDest&&this.renderView(this.articleTemplate,this.articleDest,(function(e){var n=document.createDocumentFragment();return t.items.getArticlesToShow().forEach((function(r){n.appendChild(t.createArticleFragment(e,r))})),n}))},t.prototype.createArticleFragment=function(t,e){var n=this,r=document.importNode(t.content,!0);return Object.entries(e).forEach((function(t){return n.fillTemplate(r,t)})),r},t.prototype.renderView=function(t,e,n){var r=n(t);e.appendChild(r)},t.prototype.fillTemplate=function(t,e){var n=e[0],r=e[1],i=".js-"+n.replace(/_/g,"-"),o=t.querySelector(i);null!==o&&this.fillContent(n,r,o)},t.prototype.fillContent=function(t,e,n){if(Array.isArray(e))this.fillTags(e,n);else{var r,i="string"==typeof e?e:"number"==typeof e?(r=e,Number.isNaN(r)?"":""+r):"";switch(t){case"url":case"website_url":n.setAttribute("href",i);break;case"profile_image_url":n.setAttribute("src",i);break;default:n.textContent=i}}},t.prototype.fillTags=function(t,e){t.forEach((function(t){var n=document.createElement("li");n.innerText=t.name,e.appendChild(n)}))},t.prototype.claimNoTransition=function(){null!==this.dest&&(this.conf.useTransition||this.dest.classList.add("is-no-transition"))},t.prototype.claimLoaded=function(){null!==this.dest&&this.conf.useTransition&&this.dest.classList.add("is-qiita-widget-loaded")},t.defaultConf={subject:"人気の投稿",userDest:".js-qiita-user",userTemplate:"#qiita-user-tpl",articleDest:".js-qiita-article",articleTemplate:"#qiita-article-tpl",useTransition:!0},t}();const s=function(){function t(e,n){this.conf=Object.assign({},t.defaultConf,n),this.items=new c(this.conf),this.presenter=new u(e,this.items,this.conf)}return t.prototype.init=function(){return t=this,e=void 0,r=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return[4,this.items.fetch()];case 1:return t.sent(),this.presenter.render(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.defaultConf={},t}();var l;(l=document.querySelector(".js-qiita-widget-lib"))&&new s(l,{userId:"y_hokkey",useShuffle:!0,sortByLike:!0,perPage:100,maxToShow:10,useTransition:!0,filterByLikesFrom:100}).init()})()})();